# GoUserApi

Это проект REST API для управления пользователями с трёхслойной архитектурой Handler - Service - Repository. Проект реализует полный набор CRUD операций для User
В качестве основного стека технологий были выбраны СУБД PostgreSQL, HTTP роутер chi и драйвер pgx для взаимодействия с базой данных

## Запуск проекта

Для начала необходимо создать базу данных и в ней создать таблицу users:
```sql
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    status BOOLEAN NOT NULL
);
```

Можно задать DB_HOST, DB_PORT, DB_USER, DB_PASSWORD и DB_NAME. Если они не установлены, будут использованы значения по умолчанию, заполненные в internal/config/database.go

После этого необходимо запустить сервер: go run main.go
Сервер будет запущен на порту 8081

## Описание API

Проект предоставляет HTTP API для управления пользователями. Все запросы и ответы используют формат JSON

1.  **Создание пользователя**

    Этот эндпоинт позволяет создать новую запись о пользователе. Для этого необходимо отправить POST-запрос на адрес /user/. В теле запроса должен содержаться поля name и status (boolean). В случае успешного создания сервер вернет код "201 Created" и JSON-объект созданного пользователя, дополненный сгенерированным ID

    -   **Метод:** POST
    -   **Путь:** /user/
    -   **Тело запроса:**
        ```json
        {
          "name": "Anton",
          "status": true
        }
        ```
    -   **Ответ:**
        ```json
        {
          "Id": 1,
          "Name": "Anton",
          "Status": true
        }
        ```

2.  **Получение пользователя по ID**

    Для получения информации о каком-то конкретном пользователе следует использовать GET-запрос на адрес /user/{id}. Если пользователь с таким ID будет найден, сервер вернет статус "200 OK" и JSON-объект с данными пользователя. Если пользователь не найден, вернется статус "404 Not Found"

    -   **Метод:** GET
    -   **Путь:** /user/{id}
    -   **Ответ:**
        ```json
        {
          "Id": 1,
          "Name": "Anton",
          "Status": true
        }
        ```

3.  **Получение списка пользователей с фильтрацией**

    Этот эндпоинт предназначен для получения списка пользователей, удовлетворяющих определённым фильтрам. Поддерживается фильтрация по имени и статусу через query параметры, но они необязательные (таким образом можно получить всех пользователей). Для этого нужно отправить GET-запрос на /user/. Можно использовать параметры name для поиска по имени и status (true или false) для фильтрации по статусу. Сервер всегда отвечает статусом "200 OK" и массивом JSON-объектов

    -   **Метод:** GET
    -   **Путь:** /user/
    -   **Параметры:** ?status=true&name=Anton
    -   **Ответ:**
        ```json
        [
          {
            "Id": 1,
            "name": "Anton",
            "status": true
          },
          {
            "Id": 5,
            "Name": "Anton",
            "Status": true
          }
        ]
        ```

4.  **Обновление данных пользователя**

    Чтобы обновить информацию о существующем пользователе, нужно отправить PUT-запрос на адрес /user/{id}. В теле запроса передается JSON-объект с новыми значениями для полей name и status. В случае успеха сервер вернет статус "200 OK" и обновленный JSON-объект пользователя. Если пользователь с указанным ID не существует, вернется "404 Not Found"

    -   **Метод:** PUT
    -   **Путь:** /user/{id}
    -   **Тело запроса:**
        ```json
        {
          "name": "Anton Pronin",
          "status": false
        }
        ```
    -   **Ответ:**
        ```json
        {
          "Id": 1,
          "Name": "Anton Pronin",
          "Status": false
        }
        ```

5.  **Удаление пользователя**

    Для удаления пользователя используется DELETE-запрос на адрес /user/{id}. При успешном удалении сервер вернет статус "204 No Content" без тела ответа. Если пользователь не был найден, вернется статус "404 Not Found".

    -   **Метод:** DELETE
    -   **Путь:** /user/{id}
